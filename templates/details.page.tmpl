{{template "desktop" .}}

<!-- CSS -->
{{define "css"}}
<link href="/static/css/index.css" rel="stylesheet">
<link href="/static/editor.md/css/style.css" rel="stylesheet">
<link href="/static/editor.md/css/editormd.min.css" rel="stylesheet">
{{end}}

<!-- 主体/内容 -->
{{define "content"}}
{{$post := index .Data "post"}}

<div class="container">
    <div class="d-flex">

        <!-- Catelog -->
        <nav id="sidebarMenu" class="d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-2">
              <div id="sidebar">
                <h1>目录</h1>
                <div class="markdown-body editormd-preview-container" id="custom-toc-container">#custom-toc-container</div>
              </div>
              <div id="catalog">
                <textarea id="append-test" style="display:none;"></textarea>          
              </div>
            </div>
        </nav>

        <!-- Post详情 -->
        <main class="main-bowen">
          <div id="content">
            <textarea style="display:none;" name="test-editormd-markdown-doc"></textarea>               
          </div>
        </main>


        
       
    </div>
</div>
{{end}}


<!-- JS -->
{{define "js"}}
{{$post := index .Data "post"}}
<script type="text/javascript" src="/static/editor.md/lib/jquery.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/marked.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/prettify.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/raphael.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/underscore.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/sequence-diagram.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/flowchart.min.js"></script>
<script type="text/javascript" src="/static/editor.md/lib/jquery.flowchart.min.js"></script>
<script type="text/javascript" src="/static/editor.md/editormd.min.js"></script>

<script type="text/javascript">
  $(function() {
      var contentEditor, catalogEditor;
      
      contentEditor = editormd.markdownToHTML("content", {
          markdown        : "{{$post.Content}}",//markdown ,//+ "\r\n" + $("#append-test").text(),
          //htmlDecode      : true,       // 开启 HTML 标签解析，为了安全性，默认不开启
          htmlDecode      : "style,script,iframe",  // you can filter tags decode
          //toc             : false,
          tocm            : true,    // Using [TOCM]
          tocContainer    : "#custom-toc-container", // 自定义 ToC 容器层
          //gfm             : false,
          //tocDropdown     : true,
          // markdownSourceCode : true, // 是否保留 Markdown 源码，即是否删除保存源码的 Textarea 标签
          emoji           : true,
          taskList        : true,
          tex             : true,  // 默认不解析
          flowChart       : true,  // 默认不解析
          sequenceDiagram : true,  // 默认不解析
      });
      
      catalogEditor = editormd.markdownToHTML("catalog", {
          htmlDecode      : "style,script,iframe",  // you can filter tags decode
          emoji           : true,
          taskList        : true,
          tex             : true,  // 默认不解析
          flowChart       : true,  // 默认不解析
          sequenceDiagram : true,  // 默认不解析
      });
  });
</script>

{{end}}